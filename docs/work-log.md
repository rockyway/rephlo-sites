2025-11-12 19:19:59 - Fixed frontend bug: Model Tier Management table showing empty rows after edit. Root cause was incorrect API response unwrapping in frontend/src/api/admin.ts - backend returns {status, data} but frontend was treating response.data as final value instead of response.data.data. Fixed 6 admin API methods: listModelsWithTiers, getModelTier, updateModelTier, bulkUpdateTiers, getAuditLogs, revertTierChange. Build verified with 0 errors.
2025-11-12 19:24:20 - Fixed two frontend bugs on /admin/models page: (1) Empty table rows after model tier edit - fixed 6 admin API methods in frontend/src/api/admin.ts to properly unwrap nested responses (response.data.data). (2) TierAuditLog crash on undefined fields - added field transformation layer in getAuditLogs() to map backend names (previousValue/newValue/createdAt) to frontend names (oldValues/newValues/timestamp). Build verified with 0 errors.
2025-11-12 19:28:00 - Fixed React warning 'Each child in a list should have a unique key prop' in TierAuditLog.tsx - Added keys to allowedTiers map at lines 147 and 157 using unique prefixes (old-/new-) combined with tier name and index. Build verified with 0 errors.
2025-11-12 19:30:23 - Fixed React key warning in ModelTierManagement.tsx:453 - Added unique keys combining model.id, tier value, and index for allowedTiers map to ensure uniqueness even if duplicate tiers exist. Build verified with 0 errors.
2025-11-12 19:43:26 - Fixed React key warning in ModelTierEditDialog.tsx:167 - Added unique keys combining model.id, 'current' prefix, tier value, and index for the current configuration display in edit dialog. This was the third location causing the key warning. Build verified with 0 errors.
2025-11-12 20:40:48 - Investigated React key warning on /admin/models page. Root cause identified: Backend API /admin/models/:id/tier (PATCH) returns incomplete model data after update, missing fields like id, displayName, provider, allowedTiers. This creates a model object with undefined/null values, causing React to render a row with missing data and duplicate/undefined keys. Frontend React key fixes (lines 167, 454 in ModelTierManagement.tsx, lines 147/157 in TierAuditLog.tsx, line 167 in ModelTierEditDialog.tsx) are correct. Issue is backend data transformation - needs investigation of backend controller/service layer.
2025-11-12 20:55:24 - Fixed React key warning and 'UNKNOWN' row bug on /admin/models page. Root cause: Backend PATCH /admin/models/:id/tier returns nested response {model: {...}, auditLog: {...}} but frontend expected flat ModelTierInfo object. Fixed frontend/src/api/admin.ts:130 to extract response.data.data.model instead of response.data.data. Success message now shows correct model name ('Claude Opus 4.1' instead of 'undefined'), table updates correctly without empty rows, and no React key warnings. Build verified with 0 errors. Analysis documented in docs/analysis/071-response-format-mismatch-analysis.md.
