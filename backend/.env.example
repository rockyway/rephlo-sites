# ===== Server Configuration =====
PORT=7150
HOST=0.0.0.0
NODE_ENV=development

# ===== Database Configuration =====
# Local PostgreSQL (update username/password)
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/rephlo

# Docker PostgreSQL (if using Docker)
# DATABASE_URL=postgresql://postgres:postgres@localhost:5432/rephlo

# Cloud Database Examples:
# Neon: DATABASE_URL=postgresql://user:password@ep-xxx.neon.tech/rephlo?sslmode=require
# Supabase: DATABASE_URL=postgresql://postgres:password@db.xxx.supabase.co:5432/postgres
# AWS RDS: DATABASE_URL=postgresql://username:password@rephlo-db.xxx.rds.amazonaws.com:5432/rephlo

# Database pool configuration
DATABASE_POOL_SIZE=20

# ===== Redis Configuration =====
# Used for session storage, rate limiting, and caching
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=
# Optional: Redis connection pool
REDIS_MAX_RETRIES=3
REDIS_CONNECT_TIMEOUT=10000

# ===== CORS Configuration =====
CORS_ORIGIN=http://localhost:7151

# ===== Logging Configuration =====
LOG_LEVEL=debug
LOG_DIR=logs

# ===== File Upload Configuration =====
MAX_FILE_SIZE=5242880
UPLOAD_DIR=./uploads

# ===== Application Configuration =====
APP_NAME=Rephlo Backend API

# ===== OIDC Provider Configuration =====
# Generate keys using: ts-node scripts/generate-jwks.ts
OIDC_ISSUER=http://localhost:7150
OIDC_COOKIE_KEYS=["change-this-secret-key-1","change-this-secret-key-2"]
# OIDC_JWKS_PRIVATE_KEY should be the JSON output from generate-jwks.ts
# Example format (replace with your actual generated key):
# OIDC_JWKS_PRIVATE_KEY='{"kty":"RSA","n":"...","e":"AQAB","d":"...","p":"...","q":"...","dp":"...","dq":"...","qi":"...","alg":"RS256","kid":"xxxxx","use":"sig"}'
OIDC_JWKS_PRIVATE_KEY=

# ===== Stripe Configuration =====
# Stripe API keys for subscription management
# Test keys: Start with "sk_test_" and "whsec_"
# Live keys: Start with "sk_live_" and "whsec_"
# Get keys from: https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY=sk_test_YOUR_TEST_SECRET_KEY
STRIPE_WEBHOOK_SECRET=whsec_YOUR_WEBHOOK_SECRET

# Testing Stripe webhooks locally:
# 1. Install Stripe CLI: https://stripe.com/docs/stripe-cli
# 2. Run: stripe login
# 3. Forward webhooks: stripe listen --forward-to localhost:7150/webhooks/stripe
# 4. Copy the webhook signing secret from CLI output to STRIPE_WEBHOOK_SECRET

# ===== LLM Provider API Keys =====
# Set these to enable LLM inference endpoints (/v1/completions, /v1/chat/completions)
# At least one provider must be configured for inference to work

# OpenAI API Key for GPT-5
# Get your key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=

# Anthropic API Key for Claude 3.5 Sonnet
# Get your key from: https://console.anthropic.com/settings/keys
ANTHROPIC_API_KEY=

# Google AI API Key for Gemini 2.0 Pro
# Get your key from: https://aistudio.google.com/app/apikey
GOOGLE_API_KEY=

# ===== Rate Limiting Configuration =====
# Rate limits are configured in code (see middleware/ratelimit.middleware.ts)
# Free: 10 RPM, 10k TPM, 200 credits/day
# Pro: 60 RPM, 100k TPM, 5k credits/day
# Enterprise: 300 RPM, 500k TPM, 50k credits/day

# Rate limit bypass secret (for testing only - DO NOT use in production)
# When set, requests with X-RateLimit-Bypass header matching this value will bypass rate limits
# IMPORTANT: Remove or restrict to admin users only in production
RATE_LIMIT_BYPASS_SECRET=

# ===== Google OAuth Configuration =====
# Google OAuth 2.0 credentials for social login
# Setup guide: backend/docs/setup/google-oauth-setup.md
# Get credentials from: https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
# Redirect URI must match exactly what's configured in Google Console
GOOGLE_REDIRECT_URI=http://localhost:7150/oauth/google/callback

# ===== Security Configuration =====
# Trusted proxy IPs (comma-separated) for X-Forwarded-* headers
# Add your reverse proxy IPs here (nginx, ALB, CloudFlare, etc.)
TRUSTED_PROXY_IPS=

# CSP violation report URI (optional, for production monitoring)
CSP_REPORT_URI=

# ===== Webhook Configuration =====
# Webhook timeout and retry settings for outgoing webhooks
WEBHOOK_TIMEOUT_MS=5000
WEBHOOK_MAX_RETRIES=3

# Security secrets (Future - will be used for JWT signing, webhook verification, etc.)
# JWT_SECRET=<strong-secret>
# WEBHOOK_SECRET=<webhook-signing-secret>
# ENCRYPTION_KEY=<aes-256-key>

# ===== Monitoring Configuration (Future) =====
# SENTRY_DSN=
